<!DOCTYPE html>
<html lang="es">
  <head>
    <link rel="stylesheet" href="/css/app.css">
    <%- include('../partials/head', {title: product.nombre}) %>
  </head>
  <body class="js-head-offset head-offset">
    <%- include('../partials/header') %>
    <!-- product detail -->
    <main class="main-container">
      <div class="container products-wrapper">
        <div class="row">
          <div class="col-12">
            <h2 class="products-title">Detalle del producto: <%= product.nombre %></h2>
          </div>
        </div>
        <div class="product-detail">
          <div class="row">
            <div class="col-12 col-lg-8">
              <% images.forEach(image => { %>
                <% if (image.primary === 1) { %>
                  <img src="/img/productos/<%= image.file %>" alt="imagen de producto">
                <% } %>
                <img src="/img/productos/<%= image.file %>" alt="imagen de producto" class="images-detail">
              <% }) %>
              <p class="product-detail-description">
                <%= product.descripcion.detalle %>
              </p>
              <p class="product-detail-description">
                Talles:
                <% Object.keys(product.talles).forEach(function(key) { %>
                  <% if(product.talles[key] > 0) { %>
                    <%= key %>. 
                  <% } %>
                <% }); %>
              </p>
              <p class="product-detail-description">
                <% if(!product.descripcion.color) {
                  product.descripcion.color = 'No especificado';
                }%>
                Color: <%= product.descripcion.color %>
              </p>
              <p class="product-detail-description">
                <% if(!product.descripcion.material) {
                  product.descripcion.material = 'No especificado';
                }%>
                Material: <%= product.descripcion.material %>
              </p>
            </div>
            <div class="col-12 col-lg-4">
              <article class="product-detail-info">
                <h2 class="product-detail-title"> <%= product.nombre %></h2>
                
                <% if (+product.descuento !== 0) { %>
                  <p class="product-detail-price small">
                    <span>$<%= toThousand(product.precio) %></span>
                    /
                    <b><%= product.descuento %>% OFF</b>
                  </p>
                  <p class="product-detail-price">
                    $<%= toThousand(product.precio - (product.precio * product.descuento) / 100) %> 
                  </p>
                <% }else{ %>
            
                  <p class="product-detail-price">
                    $<%= toThousand(product.precio) %>
                  </p>
    
                  <% } %>
    
    
                <ul class="actions-list">
                  <li>
                    <i class="fas fa-credit-card"></i>
                    <p>Pag√° en 12 cuotas sin interes</p>
                  </li>
                  <li>
                    <i class="fas fa-store"></i>
                    <p>Retiro gratis en locales del vendedor</p>
                  </li>
                </ul>
    
                <button value="<%= product.id %>" id="btn-cart-add" class="buy-now-button W-100">AGREGAR AL CARRITO</button>
                <hr>
    
                <a href="/products/edit/<%= product.id %>" class="action-button edit">EDITAR PRODUCTO</a>
                <form action="/products/delete/<%= product.id %>?_method=DELETE" method="POST" style="display: inline-flex">
                  <button type="submit" class="action-button delete" style="cursor:pointer;">ELIMINAR</button>
                </form>
              </article>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- /product detail -->
    <%- include('../partials/footer') %>
    <script src="/js/header.js"></script>
    <script src="/js/scripts.js"></script>
    <script src="/js/carrito.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
  </body>
</html>